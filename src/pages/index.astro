---
import Layout from "../layouts/Layout.astro";
---

<Layout title="kayh.dev" description="My website">
  <div class="w-full h-full relative">
    <div
      class="absolute w-full h-full opacity-5 bg-repeat"
      style="background-image: url('/icon-192.png')"
    >
    </div>

    <div
      class="w-full h-full min-h-screen p-1 bg-gradient-to-tr from-cyan-700 to-red-500 sm:p-0 sm:m-0 sm:py-8"
    >
      <main
        class="relative mx-auto h-full text-2xl bg-slate-950/50 overflow-hidden max-w-3xl border rounded-lg py-4"
      >
        <h1 class="text-center font-medium text-6xl">Kayh</h1>

        <div
          class="sm:max-w-sm sm:rounded mx-auto overflow-hidden whitespace-nowrap"
        >
          <div id="titles" class="animate-marquee-title"></div>

          <script>
            // Randomize title order
            const titles = [
              "Virtual Architect",
              "W*b Developer",
              "VR Enthusiast",
              "??? Engineer",
              "3D Artist",
              "Proudly Human",
              "Cypherpunk",
              "Disciple of The Sun ☼",
              "Autonomous Agent",
              "Memetic Alchemist",
              "Humanist",
              "Part-time NEET",
              "Pre-rich",
              "Enlightened by Nix",
              "Cyberspace Native",
              "Magician",
              "Wielder of the Power of Friendship",
              "Open Source Advocate",
              "Designer",
              "Lover of People ❤️",
              "Accelerationist",
              "Playing the Infinite Game",
              "CEO of something",
              "🦀 Rustacean",
              "Neovim Configurer",
              "Digital Archaeologist",
            ];

            function shuffle(items: string[]) {
              for (let i = items.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));

                const item1 = items[i];
                const item2 = items[j];

                if (!item1 || !item2) {
                  continue;
                }

                items[i] = item2;
                items[j] = item1;
              }
            }

            shuffle(titles);

            const titlesEl = document.getElementById("titles");
            if (!titlesEl) {
              throw new Error("Missing element");
            }

            titlesEl.innerHTML = titles.join(" | ");

            // Pause marquee animations on hover
            titlesEl.addEventListener("mouseenter", () => {
              titlesEl.style.animationPlayState = "paused";
            });
            titlesEl.addEventListener("mouseleave", () => {
              titlesEl.style.animationPlayState = "running";
            });
          </script>
        </div>

        <div class="flex flex-col sm:flex-row sm:space-x-8 px-8">
          <div class="w-full space-y-8">
            <section>
              <h2 class="text-cyan-400">About Me</h2>
              <hr class="border-slate-500 pb-2" />

              <p>
                Hi, I'm Kayh! Welcome to my site! I'm a self-taught developer
                building things I think are cool. I also play a lot of VRChat,
                so if you see me around come say hi!
              </p>
            </section>

            <div class="grid grid-cols-2">
              <div class="space-y-8">
                <section>
                  <h2 class="text-red-400">Projects</h2>
                  <hr class="border-slate-500 pb-2" />
                  <ul>
                    <li>
                      <a
                        href="https://github.com/unavi-xyz/unavi"
                        target="_blank"
                        class="hover:underline">UNAVI</a
                      >
                    </li>
                    <li>
                      <a
                        href="https://github.com/unavi-xyz/wired-protocol"
                        target="_blank"
                        class="hover:underline">The Wired</a
                      >
                    </li>
                  </ul>
                </section>

                <section>
                  <h2 class="text-purple-400">Code Time</h2>
                  <hr class="border-slate-500 pb-2" />
                  <a
                    href="https://wakatime.com/@cb710a2e-6926-4408-ada5-d04bdfa541f7"
                    class="pt-1"
                    ><img
                      src="https://wakatime.com/badge/user/cb710a2e-6926-4408-ada5-d04bdfa541f7.svg"
                      alt="Total time coded since Apr 17 2022"
                    /></a
                  >
                </section>

                <section>
                  <h2 class="text-pink-400">Button</h2>
                  <hr class="border-slate-500 pb-2" />

                  <div
                    class="border p-2 space-y-1.5 flex flex-col items-center rounded"
                  >
                    <a href="https://kayh.dev"><img src="/btn.gif" /></a>

                    <textarea
                      id="btn-code"
                      disabled
                      title="Copy this to your site!"
                      class="w-full rounded bg-black text-sm p-1"
                      >{
                        '<a href="https://kayh.dev" target="_blank"><img src="https://kayh.dev/btn.gif" /></a>'
                      }</textarea
                    >
                  </div>
                </section>
              </div>

              <div id="rise-plc" class="mx-auto w-[190px] h-[380px]"></div>

              <img
                id="rise"
                src="/rise.gif"
                class="absolute left-full cursor-pointer"
              />

              <script>
                const rise_normal = "/rise.gif";
                const rise_attack = "/rise_attack.gif";
                const rise_clumsy = "/rise_clumsy.gif";
                const rise_crouch = "/rise_crouch.gif";
                const rise_owo = "/rise_owo.gif";

                const img = document.getElementById(
                  "rise",
                ) as HTMLImageElement | null;
                const plc = document.getElementById("rise-plc");
                if (!img || !plc) {
                  throw new Error("Missing elements");
                }

                let timeout: number | null = null;

                // Move rise to same position as plc, plus optional offset
                const moveRise = (x = 0, y = 0) => {
                  img.style.left = `${plc.offsetLeft + x}px`;
                  img.style.top = `${plc.offsetTop + y}px`;
                };

                // Initialize rise position after load, because
                // layout shift can mess it up
                window.addEventListener("load", () => {
                  moveRise();
                });

                window.addEventListener("resize", () => moveRise());

                const animateGif = (path: string, x = 0, y = 0, len = 800) => {
                  if (timeout) {
                    clearTimeout(timeout);
                  }

                  // Add opacity transitions because of weird flickering
                  // that sometimes happens when changing gifs
                  img.style.opacity = "0";

                  img.src = path;
                  moveRise(x, y);

                  timeout = setTimeout(() => {
                    img.style.opacity = "1";

                    timeout = setTimeout(() => {
                      img.style.opacity = "0";
                      img.src = rise_normal;
                      moveRise();

                      timeout = setTimeout(() => {
                        img.style.opacity = "1";
                      }, 50);
                    }, len);
                  }, 50);
                };

                const animate = () => {
                  const rand = Math.random();

                  if (rand < 0.3) {
                    animateGif(rise_attack, -200, -80, 900);
                  } else if (rand < 0.8) {
                    animateGif(rise_clumsy, -90, -7);
                  } else if (rand < 0.95) {
                    animateGif(rise_crouch, 0, 100);
                  } else {
                    animateGif(rise_owo, -40, -100, 2000);
                  }
                };

                img.addEventListener("click", animate);
              </script>
            </div>
          </div>

          <div class="sm:w-[180px] flex flex-col-reverse sm:flex-col">
            <section class="pt-2 pb-2 sm:pt-0">
              <h2 class="text-green-400">Links</h2>
              <hr class="border-slate-500 pb-2" />
              <ul>
                <li>
                  <a
                    href="https://github.com/kayhhh"
                    target="_blank"
                    class="hover:underline">GitHub</a
                  >
                </li>
                <li>
                  <a
                    href="https://twitter.com/kayh_online"
                    target="_blank"
                    class="hover:underline">Twitter</a
                  >
                </li>
                <li>
                  <a
                    href="https://mirror.xyz/kayh-online.eth"
                    target="_blank"
                    class="hover:underline"
                    >Mirror<span class="pl-6">{"<-- blog"}</span></a
                  >
                </li>
                <!-- <li> -->
                <!--   <a -->
                <!--     href="https://vrchat.com/home/user/usr_26b4f71e-a89f-47b5-9579-4700283c3cf5" -->
                <!--     target="_blank" -->
                <!--     class="hover:underline">VRChat</a -->
                <!--   > -->
                <!-- </li> -->
                <li>
                  <a
                    href="https://myanimelist.net/profile/kayh_online"
                    target="_blank"
                    class="hover:underline">MyAnimeList</a
                  >
                </li>
              </ul>
            </section>

            <section class="py-2">
              <h2 class="text-blue-400">Groups</h2>
              <hr class="border-slate-500 pb-2" />
              <ul>
                <li>
                  <a
                    href="https://m3org.com/"
                    target="_blank"
                    class="hover:underline">M3</a
                  >
                </li>
              </ul>
            </section>

            <div class="py-6">
              <iframe
                width="180"
                height="180"
                src="https://dimden.neocities.org/navlink/"
                name="neolink"
                class="border-0 mx-auto"></iframe>
            </div>

            <section class="py-2 space-y-1">
              <hr class="border-slate-500" />
              <div class="flex justify-between">
                <a
                  href="https://hotlinewebring.club/kayh/previous"
                  class="hover:underline">{"<-"}</a
                >
                <h2 class="text-amber-300">Hotline Webring</h2>
                <a
                  href="https://hotlinewebring.club/kayh/next"
                  class="hover:underline">{"->"}</a
                >
              </div>
              <hr class="border-slate-500" />
            </section>

            <img
              src="https://count.getloli.com/get/@kayh"
              class="mx-auto py-4"
            />
          </div>
        </div>

        <div class="space-y-2 py-8">
          <ul class="px-8 flex space-x-2 w-full justify-center">
            <li>
              <img src="/ilikecomputer.png" />
            </li>

            <li>
              <img src="/lain-1.gif" />
            </li>

            <li>
              <img src="/miku.gif" />
            </li>

            <li>
              <img src="/jquery.gif" />
            </li>

            <li>
              <img src="/buyit.gif" />
            </li>
          </ul>

          <ul class="px-8 flex space-x-2 w-full justify-center">
            <li>
              <a href="https://archive.org/" target="_blank"
                ><img src="/internetarchive.gif" /></a
              >
            </li>

            <li>
              <a href="https://melps.neocities.org" target="_blank"
                ><img
                  src="https://melps.neocities.org/limk1.jpg"
                  width="88px"
                /></a
              >
            </li>

            <li>
              <a href="https://dimden.dev/" target="_blank"
                ><img src="https://dimden.dev/services/images/88x31.gif" /></a
              >
            </li>

            <li>
              <a href="https://melankorin.net/" target="_blank"
                ><img
                  src="https://melankorin.net/assets/img/buttons/button-1.gif"
                /></a
              >
            </li>
          </ul>
        </div>

        <iframe
          src="https://john.citrons.xyz/embed?ref=kayh.dev"
          style="margin-left:auto;display:block;margin-right:auto;max-width:732px;width:100%;height:94px;border:none;"
        ></iframe>
      </main>
    </div>
  </div>
</Layout>
